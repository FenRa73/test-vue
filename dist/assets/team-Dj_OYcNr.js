import{_ as S,e as n,c as T,d as N,a as f,h as x,i as F,f as P,g as k}from"./Footer-3rA6vRci.js";import{V as C,a as L,b as I,c as w,d as M,e as g,f as b}from"./VExpansionPanels-BcSqc4Ut.js";import{c as _,a as t,b as E,e as U,w as a,o as c,d as u,t as o,f as y,F as A}from"./index-CBQSq2YF.js";const j={data(){return{dateFrom:null,dateTo:null,teamName:null,page:1,itemsPerPage:12,matches:[],isLoading:!1,headers:[{key:"utcDate",title:"Дата"},{key:"status",title:"Статус"},{key:"teams",title:"Команды"},{key:"score",title:"Счет"}]}},computed:{filteredMatches(){return!this.dateFrom||!this.dateTo?this.matches:this.matches.filter(l=>{const e=new Date(l.utcDate);return e>=this.dateFrom&&e<=this.dateTo})},formattedDateTo(){if(this.dateTo)return new Date(this.dateTo).toLocaleString()},formattedDateFrom(){if(this.dateFrom)return new Date(this.dateFrom).toLocaleString()}},mounted(){this.loadMatches(),this.loadTeamName()},methods:{clearFilter(){this.dateFrom=null,this.dateTo=null},getStatusText(l){return{FINISHED:"Матч завершен",SCHEDULED:"Запланирован",LIVE:"В прямом эфире",IN_PLAY:"В игре",PAUSED:"Пауза",POSTPONED:"Отложен",SUSPENDED:"Приостановлен",CANCELED:"Отменен",TIMED:"Рассчитан"}[l]||l},getStatusColor(l){return{FINISHED:"green",SCHEDULED:"blue",LIVE:"red",IN_PLAY:"yellow",PAUSED:"purple",POSTPONED:"gray",SUSPENDED:"orange",CANCELED:"brown",TIMED:"pink"}[l]||l},loadMatches(){this.isLoading=!0;const l=this.$route.query.id;T.get(`api/v4/teams/${l}/matches`).then(e=>this.matches=e.data.matches).catch(e=>console.error(e)).finally(()=>this.isLoading=!1)},loadTeamName(){const l=this.$route.query.id;T.get(`api/v4/teams/${l}`).then(e=>this.teamName=e.data.shortName).catch(e=>console.error(e))},onSearchInput(){this.page=1}}},v={key:0};function B(l,e,V,h,r,d){return c(),_("div",null,[t(n,null,{default:a(()=>[u(" Команды > "+o(r.teamName),1)]),_:1}),t(n,{class:"pt-0"},{default:a(()=>e[2]||(e[2]=[y("h1",null,"Матчи",-1)])),_:1,__:[2]}),r.isLoading?(c(),E(N,{key:0,class:"d-block mx-auto my-8",color:"primary",indeterminate:""})):U("",!0),t(C,null,{default:a(()=>[t(I,{class:"ma-2"},{default:a(()=>[t(w,null,{default:a(({expanded:s})=>[t(f,{"no-gutters":""},{default:a(()=>[t(n,{class:"d-flex justify-start",cols:"4"},{default:a(()=>e[3]||(e[3]=[u(" Фильтрация по дате ")])),_:1,__:[3]}),t(n,{class:"text--secondary",cols:"8"},{default:a(()=>[t(x,{"leave-absolute":""},{default:a(()=>[s?(c(),_("span",v)):(c(),E(f,{key:1,style:{width:"100%"},"no-gutters":""},{default:a(()=>[t(n,{class:"d-flex justify-start",cols:"6"},{default:a(()=>[u(" Начальная дата: "+o(d.formattedDateFrom||"Не выбрана"),1)]),_:1}),t(n,{class:"d-flex justify-start",cols:"6"},{default:a(()=>[u(" Конечная дата: "+o(d.formattedDateTo||"Не выбрана"),1)]),_:1})]),_:1}))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),t(n,{class:"d-flex justify-center"},{default:a(()=>[t(F,{onClick:d.clearFilter},{default:a(()=>e[4]||(e[4]=[u("Очистить фильтр")])),_:1,__:[4]},8,["onClick"])]),_:1}),t(M,null,{default:a(()=>[t(f,{justify:"space-around","no-gutters":""},{default:a(()=>[t(n,{cols:"3"},{default:a(()=>[t(g,{modelValue:r.dateFrom,"onUpdate:modelValue":e[0]||(e[0]=s=>r.dateFrom=s),title:"Начальная дата",header:"Укажите дату"},null,8,["modelValue"])]),_:1}),t(n,{cols:"3"},{default:a(()=>[t(g,{modelValue:r.dateTo,"onUpdate:modelValue":e[1]||(e[1]=s=>r.dateTo=s),title:"Конечная дата",header:"Укажите дату"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(L,{headers:r.headers,items:d.filteredMatches},{"item.utcDate":a(({item:s})=>[u(o(new Date(s.utcDate).toLocaleString()),1)]),"item.status":a(({item:s})=>[t(b,{color:d.getStatusColor(s.status),small:""},{default:a(()=>[u(o(d.getStatusText(s.status)),1)]),_:2},1032,["color"])]),"item.teams":a(({item:s})=>{var i,m;return[y("b",null,o((i=s.homeTeam)==null?void 0:i.name)+" (H) ",1),u(" - "+o((m=s.awayTeam)==null?void 0:m.name),1)]}),"item.score":a(({item:s})=>{var i,m,p,D;return[u(o((i=s.score)==null?void 0:i.fullTime.home)+" - "+o((m=s.score)==null?void 0:m.fullTime.away)+" ( "+o((p=s.score)==null?void 0:p.halfTime.home)+" - "+o((D=s.score)==null?void 0:D.halfTime.away)+" ) ",1)]}),_:1},8,["headers","items"])])}const H=S(j,[["render",B],["__scopeId","data-v-1f5170fa"]]),R={__name:"team",setup(l){return(e,V)=>{const h=P,r=H,d=k;return c(),_(A,null,[t(h),t(r),t(d)],64)}}};export{R as default};
