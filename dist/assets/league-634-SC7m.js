import{_ as y,e as r,c as g,d as x,a as f,h as L,i as N,f as F,g as P}from"./Footer-3rA6vRci.js";import{c as _,a as t,b as D,e as k,w as a,o as m,d as n,t as o,f as T,F as C}from"./index-CBQSq2YF.js";import{V as I,a as w,b as M,c as b,d as U,e as E,f as A}from"./VExpansionPanels-BcSqc4Ut.js";const j={data(){return{dateFrom:null,dateTo:null,leagueName:null,page:1,itemsPerPage:12,matches:[],isLoading:!1,headers:[{key:"utcDate",title:"Дата"},{key:"status",title:"Статус"},{key:"teams",title:"Команды"},{key:"score",title:"Счет"}]}},computed:{filteredMatches(){return!this.dateFrom||!this.dateTo?this.matches:this.matches.filter(l=>{const e=new Date(l.utcDate);return e>=this.dateFrom&&e<=this.dateTo})},formattedDateTo(){if(this.dateTo)return new Date(this.dateTo).toLocaleString()},formattedDateFrom(){if(this.dateFrom)return new Date(this.dateFrom).toLocaleString()}},mounted(){this.loadMatches(),this.loadLeagueName()},methods:{clearFilter(){this.dateFrom=null,this.dateTo=null},getStatusText(l){return{FINISHED:"Матч завершен",SCHEDULED:"Запланирован",LIVE:"В прямом эфире",IN_PLAY:"В игре",PAUSED:"Пауза",POSTPONED:"Отложен",SUSPENDED:"Приостановлен",CANCELED:"Отменен",TIMED:"Рассчитан"}[l]||l},getStatusColor(l){return{FINISHED:"green",SCHEDULED:"blue",LIVE:"red",IN_PLAY:"yellow",PAUSED:"purple",POSTPONED:"gray",SUSPENDED:"orange",CANCELED:"brown",TIMED:"pink"}[l]||l},loadMatches(){this.isLoading=!0;const l=this.$route.query.id;g.get(`api/v4/competitions/${l}/matches`).then(e=>this.matches=e.data.matches).catch(e=>console.error(e)).finally(()=>this.isLoading=!1)},loadLeagueName(){this.isLoading=!0;const l=this.$route.query.id;g.get(`api/v4/competitions/${l}`).then(e=>this.leagueName=e.data.name).catch(e=>console.error(e)).finally(()=>this.isLoading=!1)},onSearchInput(){this.page=1}}},v={key:0};function B(l,e,V,S,u,i){return m(),_("div",null,[t(r,null,{default:a(()=>[n(" Лиги > "+o(u.leagueName),1)]),_:1}),t(r,{class:"pt-0"},{default:a(()=>e[2]||(e[2]=[T("h1",null,"Матчи",-1)])),_:1,__:[2]}),u.isLoading?(m(),D(x,{key:0,class:"d-block mx-auto my-8",color:"primary",indeterminate:""})):k("",!0),t(I,null,{default:a(()=>[t(M,{class:"ma-2"},{default:a(()=>[t(b,null,{default:a(({expanded:s})=>[t(f,{"no-gutters":""},{default:a(()=>[t(r,{class:"d-flex justify-start",cols:"4"},{default:a(()=>e[3]||(e[3]=[n(" Фильтрация по дате ")])),_:1,__:[3]}),t(r,{class:"text--secondary",cols:"8"},{default:a(()=>[t(L,{"leave-absolute":""},{default:a(()=>[s?(m(),_("span",v)):(m(),D(f,{key:1,style:{width:"100%"},"no-gutters":""},{default:a(()=>[t(r,{class:"d-flex justify-start",cols:"6"},{default:a(()=>[n(" Начальная дата: "+o(i.formattedDateFrom||"Не выбрана"),1)]),_:1}),t(r,{class:"d-flex justify-start",cols:"6"},{default:a(()=>[n(" Конечная дата: "+o(i.formattedDateTo||"Не выбрана"),1)]),_:1})]),_:1}))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:1}),t(r,{class:"d-flex justify-center"},{default:a(()=>[t(N,{onClick:i.clearFilter},{default:a(()=>e[4]||(e[4]=[n("Очистить фильтр")])),_:1,__:[4]},8,["onClick"])]),_:1}),t(U,null,{default:a(()=>[t(f,{justify:"space-around","no-gutters":""},{default:a(()=>[t(r,{cols:"3"},{default:a(()=>[t(E,{modelValue:u.dateFrom,"onUpdate:modelValue":e[0]||(e[0]=s=>u.dateFrom=s),title:"Начальная дата",header:"Укажите дату"},null,8,["modelValue"])]),_:1}),t(r,{cols:"3"},{default:a(()=>[t(E,{modelValue:u.dateTo,"onUpdate:modelValue":e[1]||(e[1]=s=>u.dateTo=s),title:"Конечная дата",header:"Укажите дату"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(w,{headers:u.headers,items:i.filteredMatches},{"item.utcDate":a(({item:s})=>[n(o(new Date(s.utcDate).toLocaleString()),1)]),"item.status":a(({item:s})=>[t(A,{color:i.getStatusColor(s.status),small:""},{default:a(()=>[n(o(i.getStatusText(s.status)),1)]),_:2},1032,["color"])]),"item.teams":a(({item:s})=>{var d,c;return[T("b",null,o((d=s.homeTeam)==null?void 0:d.name)+" (H) ",1),n(" - "+o((c=s.awayTeam)==null?void 0:c.name),1)]}),"item.score":a(({item:s})=>{var d,c,h,p;return[n(o((d=s.score)==null?void 0:d.fullTime.home)+" - "+o((c=s.score)==null?void 0:c.fullTime.away)+" ( "+o((h=s.score)==null?void 0:h.halfTime.home)+" - "+o((p=s.score)==null?void 0:p.halfTime.away)+" ) ",1)]}),_:1},8,["headers","items"])])}const H=y(j,[["render",B],["__scopeId","data-v-0ff799e0"]]),O={};function q(l,e,V,S,u,i){const s=F,d=H,c=P;return m(),_(C,null,[t(s),t(d),t(c)],64)}const z=y(O,[["render",q]]);export{z as default};
